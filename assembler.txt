include macros2.asm
include number.asm

.MODEL	LARGE
.386
.STACK 200h

MAXTEXTSIZE equ 50

.DATA

	a			dd	?
	b			dd	?
	c			dd	?
	d			dd	?
	e			dd	?
	AUX_valorFib			dd	?
	AUX_valorAnterior1			dd	?
	AUX_valorAnterior2			dd	?
	AUX_posicion			dd	?
	zv0			dd	2749124
	aux			db	?

.CODE

	mov AX,@DATA
	mov DS,AX
	mov es,ax
	fld _c
	fld _d
	fmul
	fld _b
	fadd
	fld _e
	fsub
	fstp _a
	fld _d
	fld _e
	fadd
	fstp _c
	fld _d
	fstp _a
	fld b
	fld 2
	fxch
	fcomp
	fstsw ax
	ffree st(0)
	sahf
	BGE ET_21
	fld b
	fstp AUX_valorFib
	BI ET_28
ET_21:
	fld 0
	fstp AUX_valorAnterior1
	fld 1
	fstp AUX_valorAnterior2
	fld 2
	fstp AUX_posicion
ET_37:
	fld AUX_posicion
	fld b
	fxch
	fcomp
	fstsw ax
	ffree st(0)
	sahf
	BGT ET_41
	fld AUX_valorAnterior1
	fld AUX_valorAnterior2
	fadd
	fstp AUX_valorFib
	fld AUX_valorAnterior2
	fstp AUX_valorAnterior1
	fld AUX_valorFib
	fstp AUX_valorAnterior2
	fld AUX_posicion
	fld 1
	fadd
	fstp AUX_posicion
	BI ET_37
ET_41:
ET_28:
	fld AUX_valorFib
	fstp _c
	fld _a
	fld _b
	fxch
	fcomp
	fstsw ax
	ffree st(0)
	sahf
	BGE ET_70
	fld 	zv0
	fstp _a
	BI ET_77
ET_70:
	fld _d
	fld _e
	fmul
	fstp _a
ET_77:
	mov ax, 4C00h
	int 21h

END
